<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Solving Graphs · Caesar.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Caesar.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome</a></li><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../introduction/">Introduction</a></li><li><a class="tocitem" href="../why_nongaussian/">Gaussian vs. Non-Gaussian</a></li><li><a class="tocitem" href="../../installation_environment/">Installation</a></li><li><a class="tocitem" href="../using_julia/">Using Julia</a></li><li><a class="tocitem" href="../../faq/">FAQ</a></li></ul></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../concepts/">Initial Concepts</a></li><li><a class="tocitem" href="../building_graphs/">Building Graphs</a></li><li class="is-active"><a class="tocitem" href>Solving Graphs</a><ul class="internal"><li><a class="tocitem" href="#Using-Incremental-Updates-(Clique-Recycling-I)"><span>Using Incremental Updates (Clique Recycling I)</span></a></li><li><a class="tocitem" href="#Using-Clique-out-marginalization-(Clique-Recycling-II)"><span>Using Clique out-marginalization (Clique Recycling II)</span></a></li></ul></li><li><a class="tocitem" href="../interacting_fgs/">Interact w Graphs</a></li><li><a class="tocitem" href="../dataassociation/">Multi-Modal/Hypothesis</a></li><li><a class="tocitem" href="../parallel_processing/">Parallel Processing</a></li><li><a class="tocitem" href="../using_manifolds/">Using Manifolds.jl</a></li><li><a class="tocitem" href="../../examples/parametric_solve/">[DEV] Parametric Solve</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/examples/">Caesar Examples</a></li><li><a class="tocitem" href="../../examples/basic_continuousscalar/">Canonical 1D Example</a></li><li><a class="tocitem" href="../../examples/basic_slamedonut/">Underconstrained Range-only</a></li><li><a class="tocitem" href="../../examples/basic_hexagonal2d/">Hexagonal 2D SLAM</a></li><li><a class="tocitem" href="../../examples/interm_fixedlag_hexagonal/">Fixed-Lag Solving 2D</a></li><li><a class="tocitem" href="../../examples/deadreckontether/">Dead Reckon Tether</a></li></ul></li><li><span class="tocitem">Graph Library</span><ul><li><a class="tocitem" href="../../examples/canonical_graphs/">Canonical Generators</a></li><li><a class="tocitem" href="../entry_data/">Entry=&gt;Data Blob</a></li><li><a class="tocitem" href="../available_varfacs/">Variables/Factors</a></li><li><a class="tocitem" href="../flux_factors/">Flux (NN) Factors</a></li><li><a class="tocitem" href="../../examples/using_images/">Images and AprilTags</a></li></ul></li><li><span class="tocitem">Visualization</span><ul><li><a class="tocitem" href="../../install_viz/">Installing Viz</a></li><li><a class="tocitem" href="../2d_plotting/">Plotting (2D)</a></li><li><a class="tocitem" href="../arena_visualizations/">Visualization (3D)</a></li></ul></li><li><span class="tocitem">Middlewares</span><ul><li><a class="tocitem" href="../../examples/using_ros/">ROS Middleware</a></li><li><a class="tocitem" href="../compile_binary/">Compile Binaries</a></li><li><a class="tocitem" href="../zero_install/">Zero Install Solution</a></li><li><a class="tocitem" href="../multisession/">Multi-session/agent Solving</a></li><li><a class="tocitem" href="../multilang/">Multi-Language Support</a></li></ul></li><li><span class="tocitem">How to Expand?</span><ul><li><a class="tocitem" href="../../caesar_framework/">Pkg Framework</a></li><li><a class="tocitem" href="../../examples/custom_variables/">Custom Variables</a></li><li><a class="tocitem" href="../../examples/basic_definingfactors/">Custom Prior Factor</a></li><li><a class="tocitem" href="../../examples/custom_relative_factors/">Custom Relative Factor</a></li><li><a class="tocitem" href="../../examples/custom_factor_features/">Important Factor Features</a></li><li><a class="tocitem" href="../../examples/adding_variables_factors/">Variable/Factor Considerations</a></li><li><a class="tocitem" href="../../func_ref/">More Functions</a></li></ul></li><li><span class="tocitem">Principles</span><ul><li><a class="tocitem" href="../../principles/filterCorrespondence/">Filters vs. Graphs</a></li><li><a class="tocitem" href="../../principles/approxConvDensities/">Generic Convolutions</a></li><li><a class="tocitem" href="../../principles/multiplyingDensities/">Multiplying Functions (.py)</a></li><li><a class="tocitem" href="../../principles/bayestreePrinciples/">Bayes (Junction) tree</a></li><li><a class="tocitem" href="../../principles/initializingOnBayesTree/">Advanced Bayes Tree Topics</a></li><li><a class="tocitem" href="../mmisam_alg/">Non-Gaussian Algorithm</a></li></ul></li><li><span class="tocitem">Developer Zone</span><ul><li><a class="tocitem" href="../../dev/wiki/">Wiki Pointers</a></li><li><a class="tocitem" href="../../examples/legacy_deffactors/">Legacy Factors</a></li><li><a class="tocitem" href="../../principles/interm_dynpose/">Creating DynPose Factor</a></li><li><a class="tocitem" href="../../dev/known_issues/">Known Issue List</a></li><li><a class="tocitem" href="../../dev/internal_fncs/">Internal Functions</a></li></ul></li><li><span class="tocitem">Literature</span><ul><li><a class="tocitem" href="../../refs/literature/">References</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Getting Started</a></li><li class="is-active"><a href>Solving Graphs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Solving Graphs</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaRobotics/Caesar.jl/blob/master/docs/src/concepts/solving_graphs.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="solving_graphs"><a class="docs-heading-anchor" href="#solving_graphs">Solving Graphs</a><a id="solving_graphs-1"></a><a class="docs-heading-anchor-permalink" href="#solving_graphs" title="Permalink"></a></h1><p>When you have built the graph, you can call the solver to perform inference with the following:</p><pre><code class="language-julia hljs"># Perform inference
tree = solveTree!(fg)</code></pre><p>The returned Bayes (Junction) <code>tree</code> object is described in more detail on <a href="https://juliarobotics.org/Caesar.jl/latest/principles/bayestreePrinciples/">a dedicated documentation page</a>, while <code>smt</code> and <code>hist</code> return values most closely relate to development and debug outputs which can be ignored during general use.  Should an error occur during, the exception information is easily accessible in the <code>smt</code> object (as well as file logs which default to <code>/tmp/caesar/</code>).</p><article class="docstring"><header><a class="docstring-binding" id="IncrementalInference.solveTree!" href="#IncrementalInference.solveTree!"><code>IncrementalInference.solveTree!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">solveTree!(dfgl)
solveTree!(dfgl, oldtree; timeout, storeOld, verbose, verbosefid, delaycliqs, recordcliqs, limititercliqs, injectDelayBefore, skipcliqids, eliminationOrder, eliminationConstraints, smtasks, dotreedraw, runtaskmonitor, algorithm, solveKey, multithread)
</code></pre><p>Perform inference over the Bayes tree according to <code>opt::SolverParams</code> and keyword arguments.</p><p>Notes</p><ul><li>Aliased with <code>solveGraph!</code></li><li>Variety of options, including fixed-lag solving – see <code>getSolverParams(fg)</code> for details.<ul><li>See online Documentation for more details: https://juliarobotics.org/Caesar.jl/latest/</li></ul></li><li>Latest result always stored in <code>solvekey=:default</code>.</li><li>Experimental <code>storeOld::Bool=true</code> will duplicate the current result as supersolve <code>:default_k</code>.<ul><li>Based on <code>solvable==1</code> assumption.</li></ul></li><li><code>limititercliqs</code> allows user to limit the number of iterations a specific CSM does.</li><li>keywords <code>verbose</code> and <code>verbosefid::IOStream</code> can be used together to to send output to file or default <code>stdout</code>.</li><li>keyword <code>recordcliqs=[:x0; :x7...]</code> identifies by frontals which cliques to record CSM steps.<ul><li>See <a href="concepts/@ref"><code>repeatCSMStep!</code></a>, <a href="concepts/@ref"><code>printCSMHistoryLogical</code></a>, <a href="concepts/@ref"><code>printCSMHistorySequential</code></a></li></ul></li></ul><p>DevNotes</p><ul><li>TODO Change keyword arguments to new @parameter <code>SolverOptions</code> type.</li></ul><p>Example</p><pre><code class="language-julia hljs"># pass in old `tree` to enable compute recycling -- see online Documentation for more details
tree = solveTree!(fg [,tree])</code></pre><p>Related</p><p><code>solveGraph!</code>, <a href="concepts/@ref"><code>solveCliqUp!</code></a>, <a href="concepts/@ref"><code>solveCliqDown!</code></a>, <a href="../../principles/bayestreePrinciples/#IncrementalInference.buildTreeReset!"><code>buildTreeReset!</code></a>, <a href="concepts/@ref"><code>repeatCSMStep</code></a>, <a href="concepts/@ref"><code>printCSMHistoryLogical</code></a></p></div></section></article><h2 id="Using-Incremental-Updates-(Clique-Recycling-I)"><a class="docs-heading-anchor" href="#Using-Incremental-Updates-(Clique-Recycling-I)">Using Incremental Updates (Clique Recycling I)</a><a id="Using-Incremental-Updates-(Clique-Recycling-I)-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Incremental-Updates-(Clique-Recycling-I)" title="Permalink"></a></h2><p>One of the major features of the MM-iSAMv2 algorithm (implemented by <a href="http://www.github.com/JuliaRobotics/IncrementalInference.jl">IncrementalInference.jl</a>) is reducing computational load by recycling and marginalizing different (usually older) parts of the factor graph.  In order to utilize the benefits of recycing, the previous Bayes (Junction) tree should also be provided as input (see fixed-lag examples for more details):</p><pre><code class="language-julia hljs">tree = solveTree!(fg, tree)</code></pre><h2 id="Using-Clique-out-marginalization-(Clique-Recycling-II)"><a class="docs-heading-anchor" href="#Using-Clique-out-marginalization-(Clique-Recycling-II)">Using Clique out-marginalization (Clique Recycling II)</a><a id="Using-Clique-out-marginalization-(Clique-Recycling-II)-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Clique-out-marginalization-(Clique-Recycling-II)" title="Permalink"></a></h2><p>When building sysmtes with limited computation resources, the out-marginalization of cliques on the Bayes tree can be used.  This approach limits the amount of variables that are inferred on each solution of the graph.  This method is also a compliment to the above Incremental Recycling – these two methods can work in tandem.  There is a default setting for a FIFO out-marginalization strategy (with some additional tricks):</p><pre><code class="language-julia hljs">defaultFixedLagOnTree!(fg, 50, limitfixeddown=true)</code></pre><p>This call will keep the latest 50 variables fluid for inference during Bayes tree inference.  The keyword <code>limitfixeddown=true</code> in this case will also prevent downward message passing on the Bayes tree from propagating into the out-marginalized branches on the tree.  A later page in this documentation will discuss how the inference algorithm and Bayes tree aspects are put together.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../building_graphs/">« Building Graphs</a><a class="docs-footer-nextpage" href="../interacting_fgs/">Interact w Graphs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Sunday 17 April 2022 19:29">Sunday 17 April 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
