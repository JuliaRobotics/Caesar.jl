<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Visualization (3D) · Caesar.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Caesar.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome</a></li><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../introduction/">Introduction</a></li><li><a class="tocitem" href="../why_nongaussian/">Gaussian vs. Non-Gaussian</a></li><li><a class="tocitem" href="../../installation_environment/">Installation</a></li><li><a class="tocitem" href="../using_julia/">Using Julia</a></li><li><a class="tocitem" href="../../faq/">FAQ</a></li></ul></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../concepts/">Initial Concepts</a></li><li><a class="tocitem" href="../building_graphs/">Building Graphs</a></li><li><a class="tocitem" href="../solving_graphs/">Solving Graphs</a></li><li><a class="tocitem" href="../interacting_fgs/">Interact w Graphs</a></li><li><a class="tocitem" href="../dataassociation/">Multi-Modal/Hypothesis</a></li><li><a class="tocitem" href="../parallel_processing/">Parallel Processing</a></li><li><a class="tocitem" href="../../examples/parametric_solve/">[DEV] Parametric Solve</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/examples/">Caesar Examples</a></li><li><a class="tocitem" href="../../examples/basic_continuousscalar/">Canonical 1D Example</a></li><li><a class="tocitem" href="../../examples/basic_slamedonut/">Underconstrained Range-only</a></li><li><a class="tocitem" href="../../examples/basic_hexagonal2d/">Hexagonal 2D SLAM</a></li><li><a class="tocitem" href="../../examples/interm_fixedlag_hexagonal/">Fixed-Lag Solving 2D</a></li><li><a class="tocitem" href="../../examples/deadreckontether/">Dead Reckon Tether</a></li></ul></li><li><span class="tocitem">Graph Library</span><ul><li><a class="tocitem" href="../../examples/canonical_graphs/">Canonical Generators</a></li><li><a class="tocitem" href="../available_varfacs/">Variables/Factors</a></li><li><a class="tocitem" href="../entry_data/">Entry=&gt;Data Blob</a></li><li><a class="tocitem" href="../../examples/using_images/">Images and AprilTags</a></li><li><a class="tocitem" href="../../examples/using_pcl/">Pointclouds and PCL</a></li><li><a class="tocitem" href="../using_manifolds/">Using Manifolds.jl</a></li><li><a class="tocitem" href="../flux_factors/">Flux (NN) Factors</a></li></ul></li><li><span class="tocitem">Visualization</span><ul><li><a class="tocitem" href="../../install_viz/">Installing Viz</a></li><li><a class="tocitem" href="../2d_plotting/">Plotting (2D)</a></li><li class="is-active"><a class="tocitem" href>Visualization (3D)</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#th-Generation-Dev-Scripts-using-Makie.jl"><span>4th Generation Dev Scripts using Makie.jl</span></a></li><li><a class="tocitem" href="#Visualizing-with-Arena.jl"><span>Visualizing with Arena.jl</span></a></li><li><a class="tocitem" href="#Legacy-Visualizers"><span>Legacy Visualizers</span></a></li></ul></li></ul></li><li><span class="tocitem">Middlewares</span><ul><li><a class="tocitem" href="../../examples/using_ros/">ROS Middleware</a></li><li><a class="tocitem" href="../compile_binary/">Compile Binaries</a></li><li><a class="tocitem" href="../zero_install/">Zero Install Solution</a></li><li><a class="tocitem" href="../multisession/">Multi-session/agent Solving</a></li><li><a class="tocitem" href="../multilang/">Multi-Language Support</a></li></ul></li><li><span class="tocitem">How to Expand?</span><ul><li><a class="tocitem" href="../../caesar_framework/">Pkg Framework</a></li><li><a class="tocitem" href="../../examples/custom_variables/">Custom Variables</a></li><li><a class="tocitem" href="../../examples/basic_definingfactors/">Custom Prior Factor</a></li><li><a class="tocitem" href="../../examples/custom_relative_factors/">Custom Relative Factor</a></li><li><a class="tocitem" href="../stash_and_cache/">Caching and Stashing</a></li><li><a class="tocitem" href="../../examples/custom_factor_features/">Important Factor Features</a></li><li><a class="tocitem" href="../../examples/adding_variables_factors/">Variable/Factor Considerations</a></li><li><a class="tocitem" href="../../func_ref/">More Functions</a></li></ul></li><li><span class="tocitem">Principles</span><ul><li><a class="tocitem" href="../../principles/filterCorrespondence/">Filters vs. Graphs</a></li><li><a class="tocitem" href="../../principles/approxConvDensities/">Generic Convolutions</a></li><li><a class="tocitem" href="../../principles/multiplyingDensities/">Multiplying Functions (.py)</a></li><li><a class="tocitem" href="../../principles/bayestreePrinciples/">Bayes (Junction) tree</a></li><li><a class="tocitem" href="../../principles/initializingOnBayesTree/">Advanced Bayes Tree Topics</a></li><li><a class="tocitem" href="../mmisam_alg/">Non-Gaussian Algorithm</a></li></ul></li><li><span class="tocitem">Developer Zone</span><ul><li><a class="tocitem" href="../../dev/wiki/">Wiki Pointers</a></li><li><a class="tocitem" href="../../examples/legacy_deffactors/">Legacy Factors</a></li><li><a class="tocitem" href="../../principles/interm_dynpose/">Creating DynPose Factor</a></li><li><a class="tocitem" href="../../dev/known_issues/">Known Issue List</a></li><li><a class="tocitem" href="../../dev/internal_fncs/">Internal Functions</a></li></ul></li><li><span class="tocitem">Literature</span><ul><li><a class="tocitem" href="../../refs/literature/">References</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Visualization</a></li><li class="is-active"><a href>Visualization (3D)</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Visualization (3D)</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaRobotics/Caesar.jl/blob/master/docs/src/concepts/arena_visualizations.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="[Visualization-3D](@ref-visualization_3d)"><a class="docs-heading-anchor" href="#[Visualization-3D](@ref-visualization_3d)"><a href="concepts/@ref visualization_3d">Visualization 3D</a></a><a id="[Visualization-3D](@ref-visualization_3d)-1"></a><a class="docs-heading-anchor-permalink" href="#[Visualization-3D](@ref-visualization_3d)" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>Over time, Caesar.jl/Arena.jl has used at various different 3D visualization technologies.  Currently work is underway to better standardize within the Julia ecosystem, with the 4th generation of Arena.jl – note that this is work in progress.  Information about legacy generations is included below.</p><p>For more formal visualization support, contact <a href="http://www.navability.io">www.NavAbility.io</a> via email or slack. </p><h2 id="th-Generation-Dev-Scripts-using-Makie.jl"><a class="docs-heading-anchor" href="#th-Generation-Dev-Scripts-using-Makie.jl">4th Generation Dev Scripts using Makie.jl</a><a id="th-Generation-Dev-Scripts-using-Makie.jl-1"></a><a class="docs-heading-anchor-permalink" href="#th-Generation-Dev-Scripts-using-Makie.jl" title="Permalink"></a></h2><p>Working towards new <a href="https://github.com/JuliaPlots/Makie.jl">Makie.jl</a>.  Makie supports both GL and WGL, including 3rd party libraries such as <a href="https://threejs.org/">three.js</a> (previously used via MeshCat.jl, see Legacy section below.).</p><h3 id="viz_pointcloud_makie"><a class="docs-heading-anchor" href="#viz_pointcloud_makie">Visualizing Point Clouds</a><a id="viz_pointcloud_makie-1"></a><a class="docs-heading-anchor-permalink" href="#viz_pointcloud_makie" title="Permalink"></a></h3><p>Point clouds could be massive, on the order of a million points or more.  Makie.jl has good performance for handling such large point cloud datasets.  Here is a quick example script.</p><pre><code class="language-julia hljs">using Makie, GLMakie

# n x 3 matrix of 3D points in pointcloud
pts1 = randn(100,3)
pts2 = randn(100,3)

# plot first and update with second
plt = scatter(pts1[:,1],pts1[:,2],pts1[:,3], color=pts1[:,3])
scatter!(pts2[:,1],pts2[:,2],pts2[:,3], color=-pts2[:,3])</code></pre><h2 id="Visualizing-with-Arena.jl"><a class="docs-heading-anchor" href="#Visualizing-with-Arena.jl">Visualizing with Arena.jl</a><a id="Visualizing-with-Arena.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Visualizing-with-Arena.jl" title="Permalink"></a></h2><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Arena.jl is currently out of date since the package will likely support Makie via both GL and WGL interfaces.  Makie.jl has been receiving much attention over the past years and starting to mature to a point where Arena.jl can be revived again.  2D plotting is done via <a href="../2d_plotting/#plotting_2d"><code>RoMEPlotting.jl</code></a>.</p></div></div><p>The sections below discuss 3D visualization techniques available to the Caesar.jl robot navigation system. Caesar.jl uses the <a href="https://github.com/dehann/Arena.jl">Arena.jl</a> package for all the visualization requirements.  This part of the documentation discusses the robotic visualization aspects supported by Arena.jl. Arena.jl supports a wide variety of general visualization as well as developer visualization tools more focused on research and development. The visualizations are also intended to help with subgraph plotting for finding loop closures in data or compare two datasets.</p><h2 id="Legacy-Visualizers"><a class="docs-heading-anchor" href="#Legacy-Visualizers">Legacy Visualizers</a><a id="Legacy-Visualizers-1"></a><a class="docs-heading-anchor-permalink" href="#Legacy-Visualizers" title="Permalink"></a></h2><p>Previous generations used various technologies, including WebGL and <a href="https://threejs.org/">three.js</a> by means of the <a href="https://github.com/rdeits/MeshCat.jl">MeshCat.jl</a> package. Previous incarnations used a client side installation of <a href="https://www.vtk.org/">VTK</a>  by means of the <a href="https://github.com/rdeits/DrakeVisualizer.jl">DrakeVisualizer.jl</a> and <a href="https://github.com/RobotLocomotion/director">Director</a> libraries. Different 2D plotting libraries have also been used, with evolutions to improve usability for a wider user base. Each epoch has been aimed at reducing dependencies and increasing multi-platform support.</p><h3 id="rd-Generation-MeshCat.jl-(Three.js)"><a class="docs-heading-anchor" href="#rd-Generation-MeshCat.jl-(Three.js)">3rd Generation MeshCat.jl (Three.js)</a><a id="rd-Generation-MeshCat.jl-(Three.js)-1"></a><a class="docs-heading-anchor-permalink" href="#rd-Generation-MeshCat.jl-(Three.js)" title="Permalink"></a></h3><p>For the latest work on using MeshCat.jl, see proof or concept examples in Amphitheater.jl (1Q20).  The code below inspired the Amphitheater work.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>See <a href="https://juliarobotics.org/Caesar.jl/latest/installation_environment/#Install-Visualization-Tools-1">installation page</a> for instructions.</p></div></div><p>Factor graphs of two or three dimensions can be visualized with the 3D visualizations provided by Arena.jl and it&#39;s dependencies. The 2D example above and also be visualized in a 3D space with the commands:</p><pre><code class="language-julia hljs">vc = startdefaultvisualization() # to load a DrakeVisualizer/Director process instance
visualize(fg, vc, drawlandms=false)
# visualizeallposes!(vc, fg, drawlandms=false)</code></pre><p>Here is a basic example of using visualization and multi-core factor graph solving:</p><pre><code class="language-julia hljs">addprocs(2)
using Caesar, RoME, TransformUtils, Distributions

# load scene and ROV model (might experience UDP packet loss LCM buffer not set)
sc1 = loadmodel(:scene01); sc1(vc)
rovt = loadmodel(:rov); rovt(vc)

initCov = 0.001*eye(6); [initCov[i,i] = 0.00001 for i in 4:6];
odoCov = 0.0001*eye(6); [odoCov[i,i] = 0.00001 for i in 4:6];
rangecov, bearingcov = 3e-4, 2e-3

# start and add to a factor graph
fg = identitypose6fg(initCov=initCov)
tf = SE3([0.0;0.7;0.0], Euler(pi/4,0.0,0.0) )
addOdoFG!(fg, Pose3Pose3(MvNormal(veeEuler(tf), odoCov) ) )

addLinearArrayConstraint(fg, (4.0, 0.0), :x0, :l1, rangecov=rangecov,bearingcov=bearingcov)
addLinearArrayConstraint(fg, (4.0, 0.0), :x1, :l1, rangecov=rangecov,bearingcov=bearingcov)

solveBatch!(fg)

using Arena

vc = startdefaultvisualization()
visualize(fg, vc, drawlandms=true, densitymeshes=[:l1;:x2])
visualizeDensityMesh!(vc, fg, :l1)
# visualizeallposes!(vc, fg, drawlandms=false)</code></pre><p>For more information see <a href="https://github.com/rdeits/MeshCat.jl">JuliaRobotcs/MeshCat.jl</a>.</p><h3 id="nd-Generation-3D-Viewer-(VTK-/-Director)"><a class="docs-heading-anchor" href="#nd-Generation-3D-Viewer-(VTK-/-Director)">2nd Generation 3D Viewer (VTK / Director)</a><a id="nd-Generation-3D-Viewer-(VTK-/-Director)-1"></a><a class="docs-heading-anchor-permalink" href="#nd-Generation-3D-Viewer-(VTK-/-Director)" title="Permalink"></a></h3><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This code is obsolete</p></div></div><p>Previous versions used the much larger VTK based Director available via <a href="https://github.com/rdeits/DrakeVisualizer.jl">DrakeVisualizer.jl package</a>.  This requires the following preinstalled packages:</p><pre><code class="language-bash hljs">    sudo apt-get install libvtk5-qt4-dev python-vtk</code></pre><h3 id="st-Generation-MIT-LCM-Collections-viewer"><a class="docs-heading-anchor" href="#st-Generation-MIT-LCM-Collections-viewer">1st Generation MIT LCM Collections viewer</a><a id="st-Generation-MIT-LCM-Collections-viewer-1"></a><a class="docs-heading-anchor-permalink" href="#st-Generation-MIT-LCM-Collections-viewer" title="Permalink"></a></h3><p>This code has been removed.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../2d_plotting/">« Plotting (2D)</a><a class="docs-footer-nextpage" href="../../examples/using_ros/">ROS Middleware »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 14 December 2022 07:21">Wednesday 14 December 2022</span>. Using Julia version 1.8.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
