<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Multisession and Cross-Session Solving · Caesar.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Caesar.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Getting Started</span><ul><li><a class="toctext" href="../../installation_environment/">Installation</a></li><li><a class="toctext" href="../../faq/">FAQ</a></li></ul></li><li><span class="toctext">Initial Concepts</span><ul><li><a class="toctext" href="../concepts/">Caesar Concepts</a></li><li><a class="toctext" href="../building_graphs/">Building Factor Graphs</a></li><li><a class="toctext" href="../available_varfacs/">Available Variables/Factors</a></li><li><a class="toctext" href="../interacting_fgs/">Interacting w/ Factor Graphs</a></li><li><a class="toctext" href="../mmisam_alg/">Multimodal iSAM Algorithm</a></li><li><a class="toctext" href="../database_interactions/">Using Caesar Database Operation</a></li><li><a class="toctext" href="../multilang/">Using Caesar&#39;s Multi-Language Support</a></li><li class="current"><a class="toctext" href>Multisession and Cross-Session Solving</a><ul class="internal"><li class="toplevel"><a class="toctext" href="#Steps-in-Multisession-Solve-1">Steps in Multisession Solve</a></li><li class="toplevel"><a class="toctext" href="#Example-1">Example</a></li><li class="toplevel"><a class="toctext" href="#Next-Steps-1">Next Steps</a></li></ul></li><li><a class="toctext" href="../arena_visualizations/">Arena Visualization</a></li></ul></li><li><span class="toctext">Examples</span><ul><li><a class="toctext" href="../../examples/examples/">Caesar Examples</a></li><li><a class="toctext" href="../../examples/basic_continuousscalar/">ContinuousScalar as 1D Example</a></li><li><a class="toctext" href="../../examples/basic_slamedonut/">Under-defined Trilateration SLAM 2D</a></li><li><a class="toctext" href="../../examples/basic_hexagonal2d/">Hexagonal 2D SLAM</a></li><li><a class="toctext" href="../../examples/interm_fixedlag_hexagonal/">Fixed-Lag Solving 2D</a></li></ul></li><li><span class="toctext">How to Expand?</span><ul><li><a class="toctext" href="../adding_variables_factors/">Custom Variables and Factors</a></li><li><a class="toctext" href="../../examples/basic_definingfactors/">Creating Variables and Factors</a></li><li><a class="toctext" href="../../examples/interm_dynpose/">Creating DynPose Factor</a></li></ul></li><li><span class="toctext">Developer Zone</span><ul><li><a class="toctext" href="../../dev/wiki/">Wiki Pointer</a></li></ul></li><li><span class="toctext">Literature</span><ul><li><a class="toctext" href="../../refs/literature/">References</a></li></ul></li><li><span class="toctext">Function Reference</span><ul><li><a class="toctext" href="../../func_ref/">Caesar&#39;s Reference</a></li><li><a class="toctext" href="../../vis_func_ref/">Visualization Reference</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Initial Concepts</li><li><a href>Multisession and Cross-Session Solving</a></li></ul><a class="edit-page" href="https://github.com/JuliaRobotics/Caesar.jl/blob/master/docs/src/concepts/multisession.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Multisession and Cross-Session Solving</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Multisession-Operation-1" href="#Multisession-Operation-1">Multisession Operation</a></h1><p>Having all the data consolidated in a factor graph allows us to do something we find really exciting: reason against data for different robots, different robot sessions, even different users. Of course, this is all optional, and must be explicitly configured, but if enabled, current inference solutions can make use of historical data to continually improve their solutions.</p><p>Consider a single robot working in a common environment that has driven around the same area a number of times and has identified a landmark that is (probably) the same. We can automatically close the loop and use the information from the prior data to improve our current solution. This is called a multisession solve.</p><p>To perform a multisession solve, you need to specify that a session is part of a common environment, e.g &#39;lab&#39;. A user then requests a multisession solve (manually for the moment), and this creates relationships between common landmarks. The collective information is used to produce a consensus on the shared landmarks. A chain of session solves is then created, and the information is propagated into the individual sessions, improving their results.</p><h1><a class="nav-anchor" id="Steps-in-Multisession-Solve-1" href="#Steps-in-Multisession-Solve-1">Steps in Multisession Solve</a></h1><p>The following steps are performed by the user:</p><ul><li>Indicate which sessions are part of a common environment - this is done via GraffSDK when the session is created</li><li>Request a multisession solve</li></ul><p>Upon request, the solver performs the following actions:</p><ul><li>Updates the common existing multisession landmarks with any new information (propagation from session to common information)</li><li>Builds common landmarks for any new sessions or updated data</li><li>Solves the common, multisession graph</li><li>Propagates the common consensus result to the individual sessions</li><li>Freezes all the session landmarks so that the session solving does not update the consensus result</li><li>Requests session solves for all the updated sessions</li></ul><blockquote><p><strong>Note</strong> the current approach is well positioned to transition to the &quot;Federated Bayes (Junction) Tree&quot; multisession solving method, and will be updated accordingly in due coarse.  The Federated method will allow faster multi-session solving times by avoiding the current iterated approach.</p></blockquote><h1><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h1><p>Consider three sessions which exist in the same, shared environment. In this environment, during each session the robot identified the same <code>l0</code> landmark, as shown in the below figure. <img src="../images/multisession_1initiallandmarks.png" alt="Independent Sessions"/></p><p>If we examine this in terms of the estimates of the actual landmarks, we have three independent densities (blue, green, and orange) giving measures of <code>l0</code> located at (20, 0):</p><p><img src="../images/independentlandmarks.png" alt="Independent densities"/></p><p>Now we trigger a multisession solve. For each landmark that is seen in multiple session, we produce a common landmark (we call a prime landmark) and link it to the session landmarks via factors - all denoted in black outline.</p><p><img src="../images/multisession_2linkedlandmarks.png" alt="Linked landmarks"/></p><p>A multisession solve is performed, which for each common (prime) landmark, we produce a common estimate. In terms of densities, this is a single answer for the disparate information, as shown in red in the below figure (for a slightly different dataset):</p><p><img src="../images/independentandconsensus.png" alt="Prime density"/></p><p>This information is then propagated back to the individual session landmarks, giving one common density for each landmark. As above, our green, blue, and orange individual densities are now all updated to match the consensus shown in black:</p><p><img src="../images/multisessionsolve.png" alt="Prime density"/></p><p>The session landmarks are then frozen, and individual session solves are triggered to propagate the information back into the sessions.  Until the federated upgrade is completed, the above process is iterated a few times to allow information to cross propagate through all sessions.  There federated tree solution requires only a single iteration up and down the federated Bayes (Junction) tree. </p><h1><a class="nav-anchor" id="Next-Steps-1" href="#Next-Steps-1">Next Steps</a></h1><p>This provides an initial implementation for stitching data from multiple sessions, robots, and users. In the short term, we may trigger this automatically for any shared environments.  Multisession solving along with other automated techniques for additional measurement discovery in data allows the system to &#39;dream&#39; – i.e. reducing succint info from the large volumes of heterogenous sensor data.</p><p>In the medium future we will extend this functionality to operate in the Bayes tree, which we call &#39;federated solving&#39;, so that we perform the operation using cached results of subtrees. </p><footer><hr/><a class="previous" href="../multilang/"><span class="direction">Previous</span><span class="title">Using Caesar&#39;s Multi-Language Support</span></a><a class="next" href="../arena_visualizations/"><span class="direction">Next</span><span class="title">Arena Visualization</span></a></footer></article></body></html>
