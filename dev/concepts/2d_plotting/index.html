<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Plotting (2D) · Caesar.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Caesar.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome</a></li><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../introduction/">Introduction</a></li><li><a class="tocitem" href="../why_nongaussian/">Guassian vs. Non-Gaussian</a></li><li><a class="tocitem" href="../../installation_environment/">Installation</a></li><li><a class="tocitem" href="../using_julia/">Using Julia</a></li><li><a class="tocitem" href="../../faq/">FAQ</a></li></ul></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../concepts/">Initial Concepts</a></li><li><a class="tocitem" href="../building_graphs/">Building Factor Graphs</a></li><li><a class="tocitem" href="../interacting_fgs/">Solving and Interacting</a></li><li><a class="tocitem" href="../dataassociation/">Multi-Modal/Hypothesis</a></li><li><a class="tocitem" href="../../examples/parametric_solve/">Parametric Solve (EXP)</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/examples/">Caesar Examples</a></li><li><a class="tocitem" href="../../examples/basic_continuousscalar/">Canonical 1D Example</a></li><li><a class="tocitem" href="../../examples/basic_slamedonut/">Too few range-only</a></li><li><a class="tocitem" href="../../examples/basic_hexagonal2d/">Hexagonal 2D SLAM</a></li><li><a class="tocitem" href="../../examples/interm_fixedlag_hexagonal/">Fixed-Lag Solving 2D</a></li><li><a class="tocitem" href="../../examples/deadreckontether/">Dead Reckon Tether</a></li></ul></li><li><span class="tocitem">Graph Library</span><ul><li><a class="tocitem" href="../../examples/canonical_graphs/">Canonical Generators</a></li><li><a class="tocitem" href="../entry_data/">Entry=&gt;Data Blob</a></li><li><a class="tocitem" href="../available_varfacs/">Variables/Factors</a></li><li><a class="tocitem" href="../flux_factors/">Flux (NN) Factors</a></li><li><a class="tocitem" href="../../examples/using_images/">Images and AprilTags</a></li></ul></li><li><span class="tocitem">Visualization</span><ul><li><a class="tocitem" href="../../install_viz/">Installing Viz</a></li><li class="is-active"><a class="tocitem" href>Plotting (2D)</a><ul class="internal"><li><a class="tocitem" href="#Example-Plot-SLAM-2D"><span>Example Plot SLAM 2D</span></a></li><li><a class="tocitem" href="#Plot-Belief-Density-Contour"><span>Plot Belief Density Contour</span></a></li></ul></li><li><a class="tocitem" href="../arena_visualizations/">Visualization (3D)</a></li></ul></li><li><span class="tocitem">Middlewares</span><ul><li><a class="tocitem" href="../../examples/using_ros/">ROS Middleware</a></li><li><a class="tocitem" href="../compile_binary/">Compile Binaries</a></li><li><a class="tocitem" href="../database_interactions/">Cloud Server/Database</a></li><li><a class="tocitem" href="../multisession/">Multi-session/agent Solving</a></li><li><a class="tocitem" href="../multilang/">Multi-Language Support</a></li></ul></li><li><span class="tocitem">How to Expand?</span><ul><li><a class="tocitem" href="../../caesar_framework/">Pkg Framework</a></li><li><a class="tocitem" href="../../examples/adding_variables_factors/">Custom Variables and Factors</a></li><li><a class="tocitem" href="../../examples/custom_variables/">Creating Variables</a></li><li><a class="tocitem" href="../../examples/basic_definingfactors/">Creating Factors</a></li><li><a class="tocitem" href="../../func_ref/">More Functions</a></li></ul></li><li><span class="tocitem">Principles</span><ul><li><a class="tocitem" href="../../principles/filterCorrespondence/">Filters vs. Graphs</a></li><li><a class="tocitem" href="../../principles/approxConvDensities/">Generic Convolutions</a></li><li><a class="tocitem" href="../../principles/multiplyingDensities/">Multiplying Functions (.py)</a></li><li><a class="tocitem" href="../../principles/bayestreePrinciples/">Bayes (Junction) tree</a></li><li><a class="tocitem" href="../../principles/initializingOnBayesTree/">Advanced Bayes Tree Topics</a></li><li><a class="tocitem" href="../mmisam_alg/">Non-Gaussian Algorithm</a></li></ul></li><li><span class="tocitem">Developer Zone</span><ul><li><a class="tocitem" href="../../dev/wiki/">Wiki Pointers</a></li><li><a class="tocitem" href="../../principles/interm_dynpose/">Creating DynPose Factor</a></li><li><a class="tocitem" href="../../dev/known_issues/">Known Issue List</a></li><li><a class="tocitem" href="../../dev/internal_fncs/">Internal Functions</a></li></ul></li><li><span class="tocitem">Literature</span><ul><li><a class="tocitem" href="../../refs/literature/">References</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Visualization</a></li><li class="is-active"><a href>Plotting (2D)</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Plotting (2D)</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaRobotics/Caesar.jl/blob/master/docs/src/concepts/2d_plotting.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Plotting-2D"><a class="docs-heading-anchor" href="#Plotting-2D">Plotting 2D</a><a id="Plotting-2D-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-2D" title="Permalink"></a></h1><p>Once the graph has been built, 2D plot visualizations are provided by <a href="http://www.github.com/JuliaRobotics/RoMEPlotting.jl">RoMEPlotting.jl</a> and <a href="http://www.github.com/JuliaRobotics/KernelDensityEstimatePlotting.jl">KernelDensityEstimatePlotting.jl</a>.  These visualizations tools are readily modifiable to highlight various aspects of mobile platform navigation.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Plotting packages <a href="https://juliarobotics.org/Caesar.jl/latest/installation_environment/#RoMEPlotting.jl-for-2D-plots-1">can be installed separately</a>.</p></div></div><p>The major 2D plotting functions between <code>RoMEPlotting.jl</code> and <code>KernelDensityEstimatePlotting.jl</code>:</p><ul><li><a href="#RoMEPlotting.plotSLAM2D"><code>plotSLAM2D</code></a>,</li><li><a href="#RoMEPlotting.plotSLAM2DPoses"><code>plotSLAM2DPoses</code></a>,</li><li><a href="#RoMEPlotting.plotSLAM2DLandmarks"><code>plotSLAM2DLandmarks</code></a>,</li><li><a href="#RoMEPlotting.plotPose"><code>plotPose</code></a>,</li><li><a href="#KernelDensityEstimatePlotting.plotKDE"><code>plotKDE</code></a> / <code>plot</code>,</li><li><a href="#RoMEPlotting.plotLocalProduct"><code>plotLocalProduct</code></a>,</li><li><code>PDF</code>, <code>PNG</code>, <code>SVG</code>,</li><li><code>hstack</code>, <code>vstack</code>.</li></ul><h2 id="Example-Plot-SLAM-2D"><a class="docs-heading-anchor" href="#Example-Plot-SLAM-2D">Example Plot SLAM 2D</a><a id="Example-Plot-SLAM-2D-1"></a><a class="docs-heading-anchor-permalink" href="#Example-Plot-SLAM-2D" title="Permalink"></a></h2><p>This simplest example for visualizing a 2D robot trajectory–-such as first running <a href="http://www.juliarobotics.org/Caesar.jl/latest/tut_hexagonal2d.html">the Hexagonal 2D SLAM example</a>–-</p><p>Assuming some <code>fg&lt;:AbstractDFG</code> has been loaded/constructed:</p><pre><code class="language-julia hljs"># load the plotting functionality
using RoME, RoMEPlotting

# generate some factor graph with numerical values
fg = generateCanonicalFG_Hexagonal()
solveTree!(fg)

# or fg = loadDFG(&quot;somepath&quot;)

# slam2D plot
pl = plotSLAM2D(fg, drawhist=true, drawPoints=false)</code></pre><p align="center">
<img src="https://user-images.githubusercontent.com/6412556/69353457-6cd82400-0c76-11ea-905c-8f435faa6b11.png" width="800" border="0" />
</p><article class="docstring"><header><a class="docstring-binding" id="RoMEPlotting.plotSLAM2D" href="#RoMEPlotting.plotSLAM2D"><code>RoMEPlotting.plotSLAM2D</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plotSLAM2D(fgl; solveKey, from, to, minnei, meanmax, posesPPE, landmsPPE, recalcPPEs, lbls, scale, x_off, y_off, drawTriads, spscale, dyadScale, levels, drawhist, MM, xmin, xmax, ymin, ymax, showmm, window, point_size, line_width, regexLandmark, regexPoses, manualColor, drawPoints, pointsColor, drawContour, drawEllipse, ellipseColor, contour, title)
</code></pre><p>2D plot of both poses and landmarks contained in factor graph.  Assuming poses and landmarks  are labeled <code>:x1, :x2, ...</code> and <code>:l0, :l1, ...</code>, respectively.  The range of numbers to  include can be controlled with <code>from</code> and <code>to</code> along with other keyword functionality for  manipulating the plot.</p><p>Notes</p><ul><li>Assumes <code>:l1</code>, <code>:l2</code>, ... for landmarks – </li><li>Can increase default Gadfly plot size (for JSSVG in browser): <code>Gadfly.set_default_plot_size(35cm,20cm)</code>.</li><li>Enable or disable features such as the covariance ellipse with keyword <code>drawEllipse=true</code>.</li></ul><p>DevNotes</p><ul><li>TODO update to use e.g. <code>tags=[:LANDMARK]</code>,</li><li>TODO fix <code>drawHist</code>,</li><li>TODO deprecate, <code>showmm</code>, <code>spscale</code>.</li></ul><p>Examples:</p><pre><code class="language-julia hljs">fg = generateCanonicalFG_Hexagonal()
plotSLAM2D(fg)
plotSLAM2D(fg, drawPoints=false)
plotSLAM2D(fg, contour=false, drawEllipse=true)
plotSLAM2D(fg, contour=false, title=&quot;SLAM result 1&quot;)

# or load a factor graph
fg_ = loadDFG(&quot;somewhere.tar.gz&quot;)
plotSLAM2D(fg_)</code></pre><p>Related</p><p><a href="#RoMEPlotting.plotSLAM2DPoses"><code>plotSLAM2DPoses</code></a>, <a href="#RoMEPlotting.plotSLAM2DLandmarks"><code>plotSLAM2DLandmarks</code></a>, <a href="#RoMEPlotting.plotPose"><code>plotPose</code></a>, <a href="#KernelDensityEstimatePlotting.plotKDE"><code>plotKDE</code></a> </p></div></section></article><h3 id="Plot-Covariance-Ellipse-and-Points"><a class="docs-heading-anchor" href="#Plot-Covariance-Ellipse-and-Points">Plot Covariance Ellipse and Points</a><a id="Plot-Covariance-Ellipse-and-Points-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Covariance-Ellipse-and-Points" title="Permalink"></a></h3><p>While the Caesar.jl framework is focussed on non-Gaussian inference, it is frequently desirable to relate the results to a more familiar covariance ellipse, and native support for this exists:</p><pre><code class="language-julia hljs">plotSLAM2D(fg, contour=false, drawEllipse=true, drawPoints=true)</code></pre><p align="center">
<img src="https://user-images.githubusercontent.com/6412556/98863019-c4e2da00-2435-11eb-8e50-4a34cc8de2d7.png" width="800" border="0" />
</p><h3 id="Plot-Poses-or-Landmarks"><a class="docs-heading-anchor" href="#Plot-Poses-or-Landmarks">Plot Poses or Landmarks</a><a id="Plot-Poses-or-Landmarks-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Poses-or-Landmarks" title="Permalink"></a></h3><p>Lower down utility functions are used to plot poses and landmarks separately before joining the Gadfly layers.</p><article class="docstring"><header><a class="docstring-binding" id="RoMEPlotting.plotSLAM2DPoses" href="#RoMEPlotting.plotSLAM2DPoses"><code>RoMEPlotting.plotSLAM2DPoses</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plotSLAM2DPoses(fg; solveKey, regexPoses, from, to, variableList, meanmax, ppe, recalcPPEs, lbls, scale, x_off, y_off, drawhist, spscale, dyadScale, drawTriads, drawContour, levels, contour, line_width, drawPoints, pointsColor, drawEllipse, ellipseColor, manualColor)
</code></pre><p>2D plot of all poses, assuming poses are labeled from `<code>::Symbol</code> type <code>:x0, :x1, ..., :xn</code>.  Use <code>to</code> and <code>from</code> to limit the range of numbers <code>n</code> to be drawn.  The underlying histogram can be enabled or disabled, and the size of maximum-point belief estimate cursors can be controlled with <code>spscale</code>.</p><p>Future:</p><ul><li>Relax to user defined pose labeling scheme, for example <code>:p1, :p2, ...</code></li></ul></div></section></article><article class="docstring"><header><a class="docstring-binding" id="RoMEPlotting.plotSLAM2DLandmarks" href="#RoMEPlotting.plotSLAM2DLandmarks"><code>RoMEPlotting.plotSLAM2DLandmarks</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plotSLAM2DLandmarks(fg; solveKey, regexLandmark, from, to, minnei, variableList, meanmax, ppe, recalcPPEs, lbls, showmm, scale, x_off, y_off, drawhist, drawContour, levels, contour, manualColor, c, MM, point_size, drawPoints, pointsColor, drawEllipse, ellipseColor, resampleGaussianFit)
</code></pre><p>2D plot of landmarks, assuming <code>:l1, :l2, ... :ln</code>.  Use <code>from</code> and <code>to</code> to control the range of landmarks <code>n</code> to include.</p></div></section></article><h2 id="Plot-Belief-Density-Contour"><a class="docs-heading-anchor" href="#Plot-Belief-Density-Contour">Plot Belief Density Contour</a><a id="Plot-Belief-Density-Contour-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Belief-Density-Contour" title="Permalink"></a></h2><p><code>KernelDensityEstimatePlotting</code> (as used in <code>RoMEPlotting</code>) provides an interface to visualize belief densities as counter plots.  Something basic might be to just show all plane pairs of this variable marginal belief:</p><pre><code class="language-julia hljs"># Draw the KDE for x0
plotKDE(fg, :x0)</code></pre><p>Plotting the marginal density over say variables <code>(x,y)</code> in a <a href="../available_varfacs/#RoME.Pose2"><code>Pose2</code></a> would be:</p><pre><code class="language-julia hljs">plotKDE(fg, :x1, dims=[1;2])</code></pre><p>The following example better shows some of features (via <a href="http://gadflyjl.org/stable/">Gadfly.jl</a>):</p><pre><code class="language-julia hljs"># Draw the (x,y) marginal estimated belief contour for :x0, :x2, and Lx4
pl = plotKDE(fg, [:x0; :x2; :x4], c=[&quot;red&quot;;&quot;green&quot;;&quot;blue&quot;], levels=2, dims=[1;2])

# add a few fun layers
pl3 = plotSLAM2DPoses(fg, regexPoses=r&quot;x\d&quot;, from=3, to=3, contour=false, drawEllipse=true)
pl5 = plotSLAM2DPoses(fg, regexPoses=r&quot;x\d&quot;, from=5, to=5, contour=false, drawEllipse=true, drawPoints=false)
pl_ = plotSLAM2DPoses(fg, contour=false, drawPoints=false, dyadScale=0.001, to=5)
union!(pl.layers, pl3.layers)
union!(pl.layers, pl5.layers)
union!(pl.layers, pl_.layers)

# change the plotting coordinates
pl.coord = Coord.Cartesian(xmin=-10,xmax=20, ymin=-1, ymax=25)

# save the plot to SVG and giving dedicated (although optional) sizing
pl |&gt; SVG(&quot;/tmp/test.svg&quot;, 25cm, 15cm)

# also display the plot live
pl</code></pre><p align="center">
<img src="https://user-images.githubusercontent.com/6412556/98865698-c910f680-2439-11eb-8adf-e50ec37eacc2.png" width="800" border="0" />
</p><p>See function documentation for more details on API features</p><article class="docstring"><header><a class="docstring-binding" id="KernelDensityEstimatePlotting.plotKDE" href="#KernelDensityEstimatePlotting.plotKDE"><code>KernelDensityEstimatePlotting.plotKDE</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plotKDE(fgl, sym; solveKey, dims, title, levels, fill, layers, c, overlay)
</code></pre><p>A peneric KDE plotting function that allows marginals of higher dimensional beliefs and various keyword options.</p><p>Example:</p><pre><code class="language-julia hljs">p = kde!(randn(3,100))

plotKDE(p)
plotKDE(p, dims=[1;2], levels=3)
plotKDE(p, dims=[1])

q = kde!(5*randn(3,100))
plotKDE([p;q])
plotKDE([p;q], dims=[1;2], levels=3)
plotKDE([p;q], dims=[1])</code></pre></div></section></article><h4 id="Save-Plot-to-Image"><a class="docs-heading-anchor" href="#Save-Plot-to-Image">Save Plot to Image</a><a id="Save-Plot-to-Image-1"></a><a class="docs-heading-anchor-permalink" href="#Save-Plot-to-Image" title="Permalink"></a></h4><p>VSCode/Juno can set plot to be opened in a browser tab instead.  For scripting use-cases you can also export the image:</p><pre><code class="language-julia hljs">using Gadfly
# can change the default plot size
# Gadfly.set_default_plot_size(35cm, 30cm)

pl |&gt; PDF(&quot;/tmp/test.pdf&quot;, 20cm, 10cm)  # or PNG, SVG</code></pre><h4 id="Save-Plot-Object-To-File"><a class="docs-heading-anchor" href="#Save-Plot-Object-To-File">Save Plot Object To File</a><a id="Save-Plot-Object-To-File-1"></a><a class="docs-heading-anchor-permalink" href="#Save-Plot-Object-To-File" title="Permalink"></a></h4><p>It is also possible to store the whole plot container to file using <a href="https://github.com/JuliaIO/JLD2.jl"><code>JLD2.jl</code></a>:</p><pre><code class="language-julia hljs">JLD2.@save &quot;/tmp/myplot.jld2&quot; pl

# and loading elsewhere
JLD2.@load &quot;/tmp/myplot.jld2&quot; pl</code></pre><h4 id="Interactive-Plots,-Zoom,-Pan-(Gadfly.jl)"><a class="docs-heading-anchor" href="#Interactive-Plots,-Zoom,-Pan-(Gadfly.jl)">Interactive Plots, Zoom, Pan (Gadfly.jl)</a><a id="Interactive-Plots,-Zoom,-Pan-(Gadfly.jl)-1"></a><a class="docs-heading-anchor-permalink" href="#Interactive-Plots,-Zoom,-Pan-(Gadfly.jl)" title="Permalink"></a></h4><p>See the following two discussions on Interactive 2D plots:</p><ul><li><a href="http://gadflyjl.org/stable/tutorial/#Interactivity-1">Interactivity</a></li><li><a href="http://gadflyjl.org/stable/man/backends/#Interactive-SVGs-1">Interactive-SVGs</a></li></ul><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Red and Green dyad lines represent the visualization-only assumption of X-forward and Y-left direction of <code>Pose2</code>.  The inference and manifold libraries surrounding Caesar.jl are agnostic to any particular choice of reference frame alignment, such as north east down (NED) or forward left up (common in mobile robotics).</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Also see <a href="http://gadflyjl.org/stable/">Gadfly.jl</a> notes about <code>hstack</code> and <code>vstack</code> to combine plots side by side or vertically.</p></div></div><h3 id="Plot-Pose-Individually"><a class="docs-heading-anchor" href="#Plot-Pose-Individually">Plot Pose Individually</a><a id="Plot-Pose-Individually-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Pose-Individually" title="Permalink"></a></h3><p>It is also possible to plot the belief density of a <a href="../available_varfacs/#RoME.Pose2"><code>Pose2</code></a> on-manifold:</p><pre><code class="language-julia hljs">plotPose(fg, :x6)</code></pre><p align="center">
<img src="https://user-images.githubusercontent.com/6412556/98864183-7f271100-2437-11eb-8422-8ed49c1186b9.png" width="800" border="0" />
</p><article class="docstring"><header><a class="docstring-binding" id="RoMEPlotting.plotPose" href="#RoMEPlotting.plotPose"><code>RoMEPlotting.plotPose</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plotPose(pt, pp)
plotPose(pt, pp, title; levels, c, legend, axis, scale, overlay, hdl)
</code></pre><p>Plot pose belief as contour information on visually sensible manifolds.</p><p>Example:</p><pre><code class="language-julia hljs">fg = generateCanonicalFG_Hexagonal()
solveTree!(fg);
plotPose(fg, :x6)</code></pre><p>Related</p><p><a href="#RoMEPlotting.plotSLAM2D"><code>plotSLAM2D</code></a>, <a href="#RoMEPlotting.plotSLAM2DPoses"><code>plotSLAM2DPoses</code></a>, <a href="#KernelDensityEstimatePlotting.plotKDE"><code>plotKDE</code></a>, <code>plotKDECircular</code></p></div></section><section><div><pre><code class="language-julia hljs">plotPose(fgl, syms; solveKey, levels, c, axis, scale, show, filepath, app, hdl)
</code></pre><p>Example: pl = plotPose(fg, [:x1; :x2; :x3])</p></div></section></article><h3 id="Debug-With-Local-Graph-Product-Plot"><a class="docs-heading-anchor" href="#Debug-With-Local-Graph-Product-Plot">Debug With Local Graph Product Plot</a><a id="Debug-With-Local-Graph-Product-Plot-1"></a><a class="docs-heading-anchor-permalink" href="#Debug-With-Local-Graph-Product-Plot" title="Permalink"></a></h3><p>One useful function is to check that data in the factor graph makes sense.  While the full inference algorithm uses a Bayes (Junction) tree to assemble marginal belief estimates in an efficient manner, it is often useful for a straight forward graph based sanity check.  The <a href="#RoMEPlotting.plotLocalProduct"><code>plotLocalProduct</code></a> projects through <a href="concepts/@ref"><code>approxConv</code></a> each of the factors connected to the target variable and plots the result.  This example looks at the loop-closure point around <code>:x0</code>, which is also pinned down by the only prior in the canonical Hexagonal factor graph.</p><pre><code class="language-julia hljs">@show ls(fg, :x0);
# ls(fg, :x0) = [:x0f1, :x0x1f1, :x0l1f1]

pl = plotLocalProduct(fg, :x0, dims=[1;2], levels=1)</code></pre><p align="center">
<img src="https://user-images.githubusercontent.com/6412556/98868152-b00a4480-243d-11eb-83fe-8630d64355ee.png" width="800" border="0" />
</p><p>While perhaps a little cluttered to read at first, this figure shows that a new calculation local to only the factor graph <code>prod</code> in greem matches well with the existing value <code>curr</code> in red in the <code>fg</code> from the earlier <code>solveTree!</code> call.  These values are close to the prior prediction <code>:x0f1</code> in blue (fairly trivial case), while the odometry <code>:x0x1f1</code> and landmark sighting projection <code>:x0l1f1</code> are also well in agreement.</p><article class="docstring"><header><a class="docstring-binding" id="RoMEPlotting.plotLocalProduct" href="#RoMEPlotting.plotLocalProduct"><code>RoMEPlotting.plotLocalProduct</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plotLocalProduct(fgl, lbl; solveKey, N, dims, levels, show, dirpath, mimetype, sidelength, title, xmin, xmax, ymin, ymax)
</code></pre><p>Plot the proposal belief from neighboring factors to <code>lbl</code> in the factor graph (ignoring Bayes tree representation), and show with new product approximation for reference.</p><p>DevNotes</p><ul><li>TODO, standardize around ::MIME=&quot;image/svg&quot;, see JuliaRobotics/DistributedFactorGraphs.jl#640</li></ul></div></section><section><div><pre><code class="language-julia hljs">plotLocalProduct(fgl, lbl; N, dims)
</code></pre><p>Plot the proposal belief from neighboring factors to <code>lbl</code> in the factor graph (ignoring Bayes tree representation), and show with new product approximation for reference. String version is obsolete and will be deprecated.</p></div></section></article><h3 id="More-Detail-About-Density-Plotting"><a class="docs-heading-anchor" href="#More-Detail-About-Density-Plotting">More Detail About Density Plotting</a><a id="More-Detail-About-Density-Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#More-Detail-About-Density-Plotting" title="Permalink"></a></h3><p>Multiple beliefs can be plotted at the same time, while setting <code>levels=4</code> rather than the default value:</p><pre><code class="language-julia hljs">plX1 = plotKDE(fg, [:x0; :x1], dims=[1;2], levels=4)

# plX1 |&gt; PNG(&quot;/tmp/testX1.png&quot;)</code></pre><p align="center">
<img src="https://user-images.githubusercontent.com/6412556/42532963-656cef56-8456-11e8-9636-42592c0d148c.png" width="800" border="0" />
</p><p>One dimensional (such as <code>Θ</code>) or a stack of all plane projections is also available:</p><pre><code class="language-julia hljs">plTh = plotKDE(fg, [:x0; :x1], dims=[3], levels=4)

# plTh |&gt; PNG(&quot;/tmp/testTh.png&quot;)</code></pre><p align="center">
<img src="https://user-images.githubusercontent.com/6412556/42533188-2dee90c4-8457-11e8-9844-0ef57fba1c82.png" width="800" border="0" />
</p><pre><code class="language-julia hljs">plAll = plotKDE(fg, [:x0; :x1], levels=3)
# plAll |&gt; PNG(&quot;/tmp/testX1.png&quot;,20cm,15cm)</code></pre><p align="center">
<img src="https://user-images.githubusercontent.com/6412556/42533225-42ddaf9c-8457-11e8-8b0d-b1f3695d8b00.png" width="800" border="0" />
</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The functions <code>hstack</code> and <code>vstack</code> is provided through the <code>Gadfly</code> package and allows the user to build a near arbitrary composition of plots.</p></div></div><p>Please see <a href="https://github.com/JuliaRobotics/KernelDensityEstimatePlotting.jl">KernelDensityEstimatePlotting package source</a> for more features.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../install_viz/">« Installing Viz</a><a class="docs-footer-nextpage" href="../arena_visualizations/">Visualization (3D) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.9 on <span class="colophon-date" title="Monday 18 October 2021 15:36">Monday 18 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
