<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Filters vs. Graphs · Caesar.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Caesar.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Getting Started</span><ul><li><a class="toctext" href="../../installation_environment/">Installation</a></li><li><a class="toctext" href="../../faq/">FAQ</a></li></ul></li><li><span class="toctext">Initial Concepts</span><ul><li><a class="toctext" href="../../concepts/concepts/">Caesar Concepts</a></li><li><a class="toctext" href="../../concepts/building_graphs/">Building Factor Graphs</a></li><li><a class="toctext" href="../../concepts/available_varfacs/">Available Variables/Factors</a></li><li><a class="toctext" href="../../concepts/interacting_fgs/">Interacting w/ Factor Graphs</a></li><li><a class="toctext" href="../../concepts/mmisam_alg/">Multimodal iSAM Algorithm</a></li><li><a class="toctext" href="../../concepts/multilang/">Multi-Language Support</a></li><li><a class="toctext" href="../../concepts/arena_visualizations/">Arena Visualization</a></li><li><a class="toctext" href="../../concepts/database_interactions/">Cloud Server/Database</a></li><li><a class="toctext" href="../../concepts/multisession/">Multi/Cross Session Solving</a></li></ul></li><li><span class="toctext">Examples</span><ul><li><a class="toctext" href="../../examples/examples/">Caesar Examples</a></li><li><a class="toctext" href="../../examples/basic_continuousscalar/">ContinuousScalar as 1D Example</a></li><li><a class="toctext" href="../../examples/basic_slamedonut/">Under-defined Trilateration SLAM 2D</a></li><li><a class="toctext" href="../../examples/basic_hexagonal2d/">Hexagonal 2D SLAM</a></li><li><a class="toctext" href="../../examples/interm_fixedlag_hexagonal/">Fixed-Lag Solving 2D</a></li></ul></li><li><span class="toctext">Principles</span><ul><li><a class="toctext" href="../multiplyingDensities/">Multiplying Functions (.py)</a></li><li><a class="toctext" href="../approxConvDensities/">Generic Convolutions</a></li><li class="current"><a class="toctext" href>Filters vs. Graphs</a><ul class="internal"><li><a class="toctext" href="#The-Target-Tracking-Problem-(Conventional-Filtering)-1">The Target Tracking Problem (Conventional Filtering)</a></li><li><a class="toctext" href="#Target-Tracking-(Beyond-Filtering)-1">Target Tracking (Beyond Filtering)</a></li></ul></li></ul></li><li><span class="toctext">How to Expand?</span><ul><li><a class="toctext" href="../../concepts/adding_variables_factors/">Custom Variables and Factors</a></li><li><a class="toctext" href="../../examples/basic_definingfactors/">Creating Variables and Factors</a></li><li><a class="toctext" href="../../examples/interm_dynpose/">Creating DynPose Factor</a></li></ul></li><li><span class="toctext">Developer Zone</span><ul><li><a class="toctext" href="../../dev/wiki/">Wiki Pointer</a></li></ul></li><li><span class="toctext">Literature</span><ul><li><a class="toctext" href="../../refs/literature/">References</a></li></ul></li><li><span class="toctext">Function Reference</span><ul><li><a class="toctext" href="../../func_ref/">Caesar&#39;s Reference</a></li><li><a class="toctext" href="../../vis_func_ref/">Visualization Reference</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Principles</li><li><a href>Filters vs. Graphs</a></li></ul><a class="edit-page" href="https://github.com/JuliaRobotics/Caesar.jl/blob/master/docs/src/principles/filterCorrespondence.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Filters vs. Graphs</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Correspondence-with-Filtering?-1" href="#Correspondence-with-Filtering?-1">Correspondence with Filtering?</a></h1><p>A frequent discussion point is the correspondence between Kalman/particle/log-flow filtering strategies and factor graph formulations.  This section aims to shed light on the relationship, and to show that factor graph interpretations are a powerful generalization of existing filtering techniques.  The discussion follows a <em>build-your-own-filter</em> style and combines the <a href="https://www.juliarobotics.org/Caesar.jl/latest/principles/approxConvDensities/">Approximate Convolution</a> and <a href="https://www.juliarobotics.org/Caesar.jl/latest/principles/multiplyingDensities/">Multiplying Densities</a> pages as the required <strong>prediction</strong> and <strong>update</strong> cycle steps, respectively.  Using the steps described here, the user will be able to build fully-functional–-i.e. non-Gaussian–-(Bayes) filters.  </p><p>Other major topics are:  How out-marginalization works under a factor graph inference formulation, which is discussed separately as part of the <a href="https://www.juliarobotics.org/Caesar.jl/latest/principles/bayestreePrinciples/">Bayes tree description page</a>.  Second, see <a href="https://www.juliarobotics.org/Caesar.jl/latest/faq/#Why/Where-does-non-Gaussian-data-come-from?-1">FAQ on why do we even care about non-Gaussian</a> signal processing.  The steps described on this page are accessible via several <a href="https://www.juliarobotics.org/Caesar.jl/latest/concepts/multilang/#">multi-language interfaces (middleware)</a>.</p><p>The conclusion at the end of the page tries to summarize why using a factor graph approach (w/ Bayes/junction tree inference) in a incremental/fixed-lag/federated sense–-i.e. simultaneous localization and mapping (SLAM)–-has merit.  The described steps forms part of the core operations used by the <a href="https://www.juliarobotics.org/Caesar.jl/latest/concepts/mmisam_alg/">multimodal incremental smoothing and mapping (mmisam)</a> algorithm.</p><h2><a class="nav-anchor" id="The-Target-Tracking-Problem-(Conventional-Filtering)-1" href="#The-Target-Tracking-Problem-(Conventional-Filtering)-1">The Target Tracking Problem (Conventional Filtering)</a></h2><p>Consider a common example, two dimensional target tracking, where a projectile transits over a tracking station using various sensing technologies <a href="https://www.juliarobotics.org/Caesar.jl/latest/refs/literature/">[Zarchan 2013]</a>.  Position and velocity estimates of the target</p><h3><a class="nav-anchor" id="Prediction-Step-using-a-Factor-Graph-1" href="#Prediction-Step-using-a-Factor-Graph-1">Prediction Step using a Factor Graph</a></h3><p>Assume a constant velocity model from which the estimate will be updated through the measurement model described in the next section.  A constant velocity model is taken as (cartesian)</p><div>\[\frac{dx}{dt} = 0 + \eta_x
\frac{dy}{dt} = 0 + \eta_y\]</div><p>or polar coordinates</p><div>\[\frac{d\rho}{dt} = 0 + \eta_{\rho}
\frac{d\theta}{dt} = 0 + \eta_{\theta}.\]</div><p>In this example, noise is introduced as an affine slack variable <code>\eta</code>, but could be added as any part of the process model:</p><div>\[\eta_j \sim p(...)\]</div><p>where <code>p</code> is any allowable noise probability density/distribution model – discussed more in the next section.</p><p>After integration (assume zeroth order) the associated residual function can be constructed:</p><div>\[\delta_i (\theta_{k}, \theta_{k-1}, \frac{d \theta_k}{dt}; \Delta t) = \theta_{k} - (\theta_{k-1} + \frac{d \theta_k}{dt} \Delta t)\]</div><p>Filter prediction steps are synonymous with a binary factor (conditional likelihood) between two variables where a prior estimate from one variable is projected (by means of a convolution) to the next variable.  The <a href="https://www.juliarobotics.org/Caesar.jl/latest/principles/approxConvDensities/">convolutional principle page</a> describes a more detailed example on how a convolution can be computed.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Factor graphs are constructed along with the evolution of time which allows the mmisam inference algorithm to resolve variable marginal estimates both forward and backwards in time.  Conventional filtering only allows for forward-backward &quot;smoothing&quot; as two separate processes.  When inferring over a factor graph, all variables are factors are considered simultaneously according the topological connectivity irrespective of when and where which measurements were made or communicated – as long as the factor graph (probabilistic model) captures the stochastics of the situation with sufficient accuracy.   </p></div></div><h3><a class="nav-anchor" id="Measurement-Step-using-a-Factor-Graph-1" href="#Measurement-Step-using-a-Factor-Graph-1">Measurement Step using a Factor Graph</a></h3><p>The measurement update is a product operation of infinite functional objects (probability densities)</p><div>\[p(X_k | Z_a, Z_b) \approx p(X_k | X_{k-1}, Z_a) \times p(X_k | Z_b),\]</div><p>where <code>Z_.</code> represents conditional information for two beliefs on the same variable.  The product of the two functional estimates (beliefs) are multiplied by a stochastic algorithm described in more detail <a href="https://www.juliarobotics.org/Caesar.jl/latest/principles/multiplyingDensities/">on the multiplying functions page</a>.</p><p>Direct or indirect measurements of the state variables are should be modeled with the most sensible function <code>y = h(\theta, \eta)</code> – i.e. linear or non-linear functions that approximate the underlying stochastics and physics of the process at hand.  </p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Mmisam allows for parametric, non-parametric, or intensity noise models which can be incorporated into any differentiable residual function.</p></div></div><p>Direct state observations can be added to the factor graph as prior factors directly on the variables.  Alternatively measurement models can be used to project belief through a measurement function:</p><div>\[\delta_j(\theta_j, \eta_j) = y_j - h_j(\theta_j, \eta_j).\]</div><h2><a class="nav-anchor" id="Target-Tracking-(Beyond-Filtering)-1" href="#Target-Tracking-(Beyond-Filtering)-1">Target Tracking (Beyond Filtering)</a></h2><p>Consider a multi-sensory system along with data transmission delays, variable sampling rates, etc.;  when designing a filtering system to track one or multiple targets, it quickly becomes difficult to augment state vectors with the required state and measurement histories.  In contrast, the factor graph as a language allows for heterogeneous data streams to be combined in a common inference framework, and is <a href="http://www.juliarobotics.org/Caesar.jl/latest/concepts/building_graphs/">discussed further in the building distributed factor graphs section</a>.  </p><blockquote><p>TODO: Multi-modal (belief) vs. multi-hypothesis.</p></blockquote><footer><hr/><a class="previous" href="../approxConvDensities/"><span class="direction">Previous</span><span class="title">Generic Convolutions</span></a><a class="next" href="../../concepts/adding_variables_factors/"><span class="direction">Next</span><span class="title">Custom Variables and Factors</span></a></footer></article></body></html>
