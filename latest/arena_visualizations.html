<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Arena Visualization · Caesar.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="Caesar.jl logo"/></a><h1>Caesar.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="examples.html">Examples</a></li><li><a class="toctext" href="tutorialcontinuousscalar.html">Tutorial 1: ContinuousScalar</a></li><li class="current"><a class="toctext" href="arena_visualizations.html">Arena Visualization</a><ul class="internal"><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#D-Visualization-1">2D Visualization</a></li><li><a class="toctext" href="#D-Visualization-2">3D Visualization</a></li></ul></li><li><a class="toctext" href="database_interactions.html">Database Layer</a></li><li><a class="toctext" href="func_ref.html">Functions</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="arena_visualizations.html">Arena Visualization</a></li></ul><a class="edit-page" href="https://github.com/dehann/Caesar.jl/blob/master/docs/src/arena_visualizations.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Arena Visualization</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Visualization-with-Arena.jl-1" href="#Visualization-with-Arena.jl-1">Visualization with Arena.jl</a></h1><p>Caesar.jl uses the <a href="https://github.com/dehann/Arena.jl">Arena.jl</a> package for all the visualization requirements.  This part of the documentation discusses the robotic visualization aspects supported by Arena.jl. Arena.jl supports a wide variety of general visualization as well as developer visualization tools more focused on research and development.</p><p>Over time, Caesar.jl has used a least three different 3D visualization technologies, with the most recent based on WebGL and <a href="https://threejs.org/">three.js</a> by means of the <a href="https://github.com/rdeits/MeshCat.jl">MeshCat.jl</a> package. The previous incarnation used a client side installation of <a href="https://www.vtk.org/">VTK</a>  by means of the <a href="https://github.com/rdeits/DrakeVisualizer.jl">DrakeVisualizer.jl</a> and <a href="https://github.com/RobotLocomotion/director">Director</a> libraries. Different 2D plotting libraries have also been used, with evolutions to improve usability for a wider user base. Each epoch has aimed at reducing dependencies and increasing multi-platform support.</p><p>The sections below discuss 2D and 3D visualization techniques available to the Caesar.jl robot navigation system. Visualization examples will be seen throughout the Caesar.jl package documentation.</p><p><strong>Note</strong> that all visualizations used to be part of the Caesar.jl package itself, but was separated out to Arena.jl in early. There may be some package documentation glitches where the <code>using Arena</code> dependency has not been added – please file issues or suggest changes accordingly.</p><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><p>This package will soon be registed with Julia METADATA which will make it available with the standard package management tools.  Within <a href="http://www.julialang.org">Julia</a> or (<a href="http://www.juliacomputing.com">JuliaPro</a>) type:</p><pre><code class="language-julia">julia&gt; Pkg.add(&quot;Arena&quot;)</code></pre><p>Depending on the system, the following <code>sudo apt-get install</code> packages may be required, see <a href="https://github.com/rdeits/DrakeVisualizer.jl">DrakeVisualizer.jl</a> for more details:</p><pre><code class="language-none">libvtk5-qt4-dev python-vtk</code></pre><h2><a class="nav-anchor" id="D-Visualization-1" href="#D-Visualization-1">2D Visualization</a></h2><p>2D plot visualizations are generally useful for repeated analysis of a algorithm or data set being studied. These visualizations are often manipulated to emphasize particular aspects of mobile platform navigation. Arena.jl is intended to simplify the process 2D plotting for robot trajectories in two or three dimensions. The visualizations are also intended to help with subgraph plotting for finding loop closures in data or compare two datasets.</p><h3><a class="nav-anchor" id="Hexagonal-2D-SLAM-example-visualization-1" href="#Hexagonal-2D-SLAM-example-visualization-1">Hexagonal 2D SLAM example visualization</a></h3><p>This simplest example for visualizing a 2D robot trajectory is:</p><pre><code class="language-julia">using RoME, Arena  

fg = initfg()

# also add a PriorPose2 to pin the first pose at a fixed location
addNode!(fg, :x0, Pose2, labels=[&quot;VARIABLE&quot;;&quot;POSE&quot;])
addFactor!(fg, [:x0], PriorPose2(zeros(3,1), 0.01*eye(3), [1.0]))

# Drive around in a hexagon
for i in 0:5
  psym = Symbol(&quot;x$i&quot;)
  nsym = Symbol(&quot;x$(i+1)&quot;)
  addNode!(fg, nsym, Pose2, labels=[&quot;VARIABLE&quot;;&quot;POSE&quot;])
  addFactor!(fg, [psym;nsym], Pose2Pose2(reshape([10.0;0;pi/3],3,1), 0.01*eye(3), [1.0]), autoinit=true )
  # Pose2Pose2_NEW(MvNormal([10.0;0;pi/3], diagm([0.1;0.1;0.1].^2)))
end

ensureAllInitialized!(fg)
solveBatch!(fg)

# The RoME and IncrementalInference

# RoMEPlotting, KernelDensityEstimatePlotting and Gadfly packages provide the 2D visualization
drawPoses(fg)</code></pre><h2><a class="nav-anchor" id="D-Visualization-2" href="#D-Visualization-2">3D Visualization</a></h2><p>Factor graphs of two or three dimensions can be visualized with the 3D visualizations provided by Arena.jl and it&#39;s dependencies. The 2D example above and also be visualized in a 3D space with the commands:</p><pre><code class="language-julia">vc = startdefaultvisualization() # to load a DrakeVisualizer/Director process instance
visualize(fg, vc, drawlandms=false)
# visualizeallposes!(vc, fg, drawlandms=false)</code></pre><p>Here is a basic example of using visualization and multi-core factor graph solving:</p><pre><code class="language-julia">addprocs(2)
using Caesar, RoME, TransformUtils, Distributions

# load scene and ROV model (might experience UDP packet loss LCM buffer not set)
sc1 = loadmodel(:scene01); sc1(vc)
rovt = loadmodel(:rov); rovt(vc)

initCov = 0.001*eye(6); [initCov[i,i] = 0.00001 for i in 4:6];
odoCov = 0.0001*eye(6); [odoCov[i,i] = 0.00001 for i in 4:6];
rangecov, bearingcov = 3e-4, 2e-3

# start and add to a factor graph
fg = identitypose6fg(initCov=initCov)
tf = SE3([0.0;0.7;0.0], Euler(pi/4,0.0,0.0) )
addOdoFG!(fg, Pose3Pose3(MvNormal(veeEuler(tf), odoCov) ) )

addLinearArrayConstraint(fg, (4.0, 0.0), :x0, :l1, rangecov=rangecov,bearingcov=bearingcov)
addLinearArrayConstraint(fg, (4.0, 0.0), :x1, :l1, rangecov=rangecov,bearingcov=bearingcov)

solveBatch!(fg)

using Arena

vc = startdefaultvisualization()
visualize(fg, vc, drawlandms=true, densitymeshes=[:l1;:x2])
visualizeDensityMesh!(vc, fg, :l1)
# visualizeallposes!(vc, fg, drawlandms=false)</code></pre><footer><hr/><a class="previous" href="tutorialcontinuousscalar.html"><span class="direction">Previous</span><span class="title">Tutorial 1: ContinuousScalar</span></a><a class="next" href="database_interactions.html"><span class="direction">Next</span><span class="title">Database Layer</span></a></footer></article></body></html>
